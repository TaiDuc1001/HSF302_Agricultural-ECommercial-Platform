<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Products - AgriMarket</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <div class="min-h-screen">
        <nav class="bg-green-700 text-white p-4">
            <div class="container mx-auto flex justify-between items-center">
                <h1 class="text-2xl font-bold">AgriMarket</h1>
                <div class="flex space-x-4">
                    <a href="/seller/home" class="hover:text-green-200">Dashboard</a>
                    <a href="/auth/logout" class="hover:text-green-200">Logout</a>
                </div>
            </div>
        </nav>

        <div class="container mx-auto p-8">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold text-gray-800">My Products</h1>
                <a href="/seller/add-product" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                    Add New Product
                </a>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <div class="flex flex-wrap gap-4 items-center">
                    <div class="flex-1 min-w-64">
                        <input type="text" id="search" placeholder="Search products..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                    <select id="category-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">All Categories</option>
                        <option value="vegetables">Vegetables</option>
                        <option value="fruits">Fruits</option>
                        <option value="herbs">Herbs</option>
                        <option value="dairy">Dairy</option>
                    </select>
                    <select id="status-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">All Status</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                        <option value="out-of-stock">Out of Stock</option>
                    </select>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="products-grid">
            </div>

            <div id="no-products" class="hidden text-center py-12">
                <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                </svg>
                <h3 class="text-xl font-semibold text-gray-600 mb-2">No products found</h3>
                <p class="text-gray-500 mb-4">Start by adding your first product!</p>
                <a href="/seller/add-product" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                    Add Product
                </a>
            </div>
        </div>
    </div>

    <script>
        const products = [
            {
                id: 1,
                name: 'Organic Tomatoes',
                category: 'vegetables',
                price: 4.99,
                stock: 50,
                status: 'active',
                image: 'https://images.unsplash.com/photo-1546470427-e9ce96e89b2b?auto=format&fit=crop&w=300&h=200',
                description: 'Fresh organic tomatoes from our farm'
            },
            {
                id: 2,
                name: 'Fresh Lettuce',
                category: 'vegetables',
                price: 2.99,
                stock: 30,
                status: 'active',
                image: 'https://images.unsplash.com/photo-1622205313162-be1d5712a43f?auto=format&fit=crop&w=300&h=200',
                description: 'Crisp and fresh lettuce'
            },
            {
                id: 3,
                name: 'Sweet Corn',
                category: 'vegetables',
                price: 1.99,
                stock: 0,
                status: 'out-of-stock',
                image: 'https://images.unsplash.com/photo-1551754655-cd27e38d2076?auto=format&fit=crop&w=300&h=200',
                description: 'Sweet and tender corn'
            },
            {
                id: 4,
                name: 'Fresh Basil',
                category: 'herbs',
                price: 3.49,
                stock: 25,
                status: 'active',
                image: 'https://images.unsplash.com/photo-1618375569909-3c8616cf7733?auto=format&fit=crop&w=300&h=200',
                description: 'Aromatic fresh basil'
            },
            {
                id: 5,
                name: 'Organic Apples',
                category: 'fruits',
                price: 5.99,
                stock: 40,
                status: 'inactive',
                image: 'https://images.unsplash.com/photo-1619546813926-a78fa6372cd2?auto=format&fit=crop&w=300&h=200',
                description: 'Sweet organic apples'
            }
        ];

        let filteredProducts = [...products];

        function renderProducts() {
            const grid = document.getElementById('products-grid');
            const noProducts = document.getElementById('no-products');
            
            if (filteredProducts.length === 0) {
                grid.innerHTML = '';
                noProducts.classList.remove('hidden');
                return;
            }
            
            noProducts.classList.add('hidden');
            
            const productsHtml = filteredProducts.map(product => `
                <div class="bg-white rounded-lg shadow-md overflow-hidden">
                    <div class="relative">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover">
                        <div class="absolute top-3 right-3">
                            ${getStatusBadge(product.status)}
                        </div>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-semibold text-gray-800 truncate">${product.name}</h3>
                            <span class="text-lg font-bold text-green-600">$${product.price.toFixed(2)}</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-3 line-clamp-2">${product.description}</p>
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-sm text-gray-600">Stock: ${product.stock}</span>
                            <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded">${product.category}</span>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="editProduct(${product.id})" class="flex-1 bg-blue-600 text-white text-sm py-2 rounded hover:bg-blue-700 transition-colors">
                                Edit
                            </button>
                            <button onclick="toggleStatus(${product.id})" class="flex-1 ${product.status === 'active' ? 'bg-yellow-600 hover:bg-yellow-700' : 'bg-green-600 hover:bg-green-700'} text-white text-sm py-2 rounded transition-colors">
                                ${product.status === 'active' ? 'Deactivate' : 'Activate'}
                            </button>
                            <button onclick="deleteProduct(${product.id})" class="bg-red-600 text-white text-sm px-3 py-2 rounded hover:bg-red-700 transition-colors">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            grid.innerHTML = productsHtml;
        }

        function getStatusBadge(status) {
            switch (status) {
                case 'active':
                    return '<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Active</span>';
                case 'inactive':
                    return '<span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded">Inactive</span>';
                case 'out-of-stock':
                    return '<span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded">Out of Stock</span>';
                default:
                    return '';
            }
        }

        function filterProducts() {
            const search = document.getElementById('search').value.toLowerCase();
            const category = document.getElementById('category-filter').value;
            const status = document.getElementById('status-filter').value;
            
            filteredProducts = products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(search) || 
                                    product.description.toLowerCase().includes(search);
                const matchesCategory = !category || product.category === category;
                const matchesStatus = !status || product.status === status;
                
                return matchesSearch && matchesCategory && matchesStatus;
            });
            
            renderProducts();
        }

        function editProduct(id) {
            alert(`Edit product ${id} - This would open an edit form`);
        }

        function toggleStatus(id) {
            const product = products.find(p => p.id === id);
            if (product) {
                if (product.status === 'active') {
                    product.status = 'inactive';
                } else if (product.status === 'inactive') {
                    product.status = 'active';
                }
                filterProducts();
            }
        }

        function deleteProduct(id) {
            if (confirm('Are you sure you want to delete this product?')) {
                const index = products.findIndex(p => p.id === id);
                if (index > -1) {
                    products.splice(index, 1);
                    filterProducts();
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            renderProducts();
            
            document.getElementById('search').addEventListener('input', filterProducts);
            document.getElementById('category-filter').addEventListener('change', filterProducts);
            document.getElementById('status-filter').addEventListener('change', filterProducts);
        });
    </script>
</body>
</html>
